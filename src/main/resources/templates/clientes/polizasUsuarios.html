<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mis Pólizas - SegurApp</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/usuarios/polizasUsuarios.css}"/>
</head>

<body>
  <aside class="sidebar">
    <nav>
      <ul>  
        <li><a th:href="@{dashboard}">Inicio</a></li>
        <li><a th:href="@{compraSeguros}">Comprar seguros</a></li>
        <li><a th:href="@{polizasUsuarios}">Gestionar seguros</a></li>
        <li><a th:href="@{pagosUsuarios}">Gestión de Pagos</a></li>
        <li><a th:href="@{contacto}">Contacto</a></li>
      </ul>
    </nav>
  </aside>


    <main class="content">
    <header class="top-bar">
      <h1>Mis pólizas contratadas</h1>
        <a th:href="@{dashboard}">Regresar al inicio</a>    
    </header>


    <section class="filtros-section">
      <label>Estado:
        <select id="filtroEstado">
          <option value="">Todos</option>
          <option>Vigente</option>
          <option>Vencida</option>
          <option>En renovación</option>
          <option>Cancelada</option>
        </select>
      </label>
      <input type="text" id="filtroTexto" placeholder="Buscar por tipo o aseguradora" />
    </section>


    <section class="table-section">
      <h2>Detalle de mis pólizas</h2>
      <table id="tblMisPolizas">
        <thead>
          <tr>
            <th># Poliza</th>
            <th>Tipo</th>
            <th>Plan</th>
            <th>Inicio</th>
            <th>Fin</th>
            <th>Estado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
            <tr th:each="poliza : ${polizas}">
                <td th:text="${poliza.id_poliza}"></td>
                <td th:text="${poliza.poliza_modelo.seguro.tipo}"></td>
                <td th:text="${poliza.poliza_modelo.nombre_plan}"></td>
                <td th:text="${poliza.fecha_inicio}"></td>
                <td th:text="${poliza.fecha_fin}"></td>
                <td th:text="${poliza.estado}"></td>
                <td>
                  <a th:href="@{'/usuarios/detallePoliza/' + ${poliza.id_poliza}}">Ver</a>
                </td>
             </tr>
             
             <tr th:if="${#lists.isEmpty(polizas)}">
                <td colspan="7">No tienes pólizas registradas actualmente.</td>
             </tr>
        </tbody>
      </table>
    </section>
  </main>


  <footer class="bottom-nav">
    <a th:href="@{dashboard}">Inicio</a>
    <a th:href="@{ayuda}">Ayuda</a>
    <a th:href="@{contacto}">Contacto</a>
    <form th:action="@{/perform_logout}" method="post">
        <input type="submit" value="Cerrar sesión" />
    </form>  
  </footer>

  <script th:src="@{/js/polizasUsuarios.js}"></script>
</body>
</html>
