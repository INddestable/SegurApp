<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tienda - SegurApp</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/usuarios/compraSeguros.css}" />
</head>

<body>

  <aside class="sidebar">
    <nav>
      <ul>  
        <li><a th:href="@{dashboard}">Inicio</a></li>
        <li><a th:href="@{compraSeguros}">Comprar seguros</a></li>
        <li><a th:href="@{polizasUsuarios}">Gestionar seguros</a></li>
        <li><a th:href="@{/clientes/gestionPagos}">Gesti贸n de Pagos</a></li>
        <li><a th:href="@{contacto}">Contacto</a></li>
      </ul>
    </nav>
  </aside>


  <main class="content">
    <header class="top-bar">
      <h1>Tienda de Seguros</h1>
      <a th:href="@{dashboard}">Regresar al inicio</a></li>
    </header>

    <section class="productos-section">
      <h2>Seguros disponibles</h2>
      
      <div class="productos-grid">
        <table id="tblSeguros">
        <thead>
          <tr>
            <th>ID</th>
            <th>Seguro</th>
            <th>Seguro ID</th>
            <th>Documento Admin</th>
            <th>Plan</th>
            <th>Descripci贸n</th>
            <th>Condiciones Generales</th>
          </tr>
        </thead>
        <tbody>
            <tr th:each="pm : ${modelos}">
                <th th:scope="row" th:text="*{pm.id_modelos}" ></th>
                <td th:text="*{pm.seguro.tipo}" ></td>
                <td th:text="*{pm.seguro.seguro_id}" ></td>
                <td th:text="*{pm.documento_admin.documento_admin}" ></td>
                <td th:text="*{pm.nombre_plan}" ></td>
                <td th:text="*{pm.descripcion}" ></td>
                <td th:text="*{pm.condiciones_generales}" ></td>
                
                <td>
                      <form th:action="@{'/clientes/compraSeguros/' + ${pm.id_modelos}}" method="post">
                          <button type="submit" class="btnGuardar">
                              Comprar
                          </button>
                      </form>
                  </td>
                
            </tr>
        </tbody>
      </table>
      </div>
    </section>


    <section class="carrito-section">
      <h2>Mi carrito</h2>
      <table id="tblCarrito">
    <thead>
        <tr>
          <th>ID</th>
          <th>Seguro</th>
          <th>Plan</th>
          <th>Descripci贸n</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="item : ${carrito}">
          <td th:text="${item.id_modelos}"></td>
          <td th:text="${item.seguro.tipo}"></td>
          <td th:text="${item.nombre_plan}"></td>
          <td th:text="${item.descripcion}"></td>
        </tr>
      </tbody>
    </table>
    <div class="total-carrito">
        <strong>Total: $<span id="totalCarrito" th:text="${totalCarrito}">0</span></strong>
    </div>
    <form th:action="@{/clientes/polizasUsuarios}" method="post">  
      <button id="btnFinalizarCompra">Finalizar compra</button>
    </form>
    </section>
  </main>

  <footer class="bottom-nav">
    <a th:href="@{dashboard}">Inicio</a>
    <a th:href="@{ayuda}">Ayuda</a>
    <a th:href="@{contacto}">Contacto</a>
    <form th:action="@{/perform_logout}" method="post">
        <input type="submit" value="Cerrar sesi贸n" />
    </form>  
  </footer>

  
</body>
</html>
